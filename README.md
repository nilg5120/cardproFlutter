# CardPro - ポケモンカードコレクション管理アプリ

## クリーンアーキテクチャの実装

このプロジェクトは、クリーンアーキテクチャの原則に従って実装されています。これにより、コードの保守性、テスト容易性、および拡張性が向上します。

### プロジェクト構造

```
doc/
├── uml/                      # ユーザーマニュアル
│   ├── screen_flow.puml          # 画面遷移図
cardpro_requirements.md          # 要件定義書
lib/
├── core/                      # コア機能（共通ユーティリティ、エラーハンドリングなど）
│   ├── di/                    # 依存性注入
│   │   └── injection_container.dart
│   └── error/                 # エラー処理
│       └── failures.dart
│
├── features/                  # 機能モジュール
│   ├── cards/                 # カード機能
│   │   ├── data/              # データ層
│   │   │   ├── datasources/   # データソース
│   │   │   ├── models/        # データモデル
│   │   │   └── repositories/  # リポジトリ実装
│   │   ├── domain/            # ドメイン層
│   │   │   ├── entities/      # エンティティ
│   │   │   ├── repositories/  # リポジトリインターフェース
│   │   │   └── usecases/      # ユースケース
│   │   └── presentation/      # プレゼンテーション層
│   │       ├── bloc/          # BLoCパターン
│   │       ├── pages/         # 画面
│   │       └── widgets/       # ウィジェット
│   │
│   └── decks/                 # デッキ機能（同様の構造）
│
├── db/                        # データベース関連
│   ├── database.dart          # Driftデータベース定義
│   └── ...
│
└── main.dart                  # アプリケーションのエントリーポイント
```

### アーキテクチャの層

1. **プレゼンテーション層**
   - UIコンポーネント（ページ、ウィジェット）
   - 状態管理（BLoC）
   - ユーザー入力の処理

2. **ドメイン層**
   - ビジネスロジック
   - エンティティ（ビジネスオブジェクト）
   - リポジトリインターフェース
   - ユースケース（アプリケーションの具体的な機能）

3. **データ層**
   - リポジトリの実装
   - データソース（ローカル、リモート）
   - データモデル（エンティティのマッピング）

### 依存性の方向

依存性は常に外側から内側に向かいます：
- プレゼンテーション層 → ドメイン層 ← データ層

ドメイン層は他の層に依存せず、純粋なDartコードのみで構成されています。これにより、ビジネスロジックを独立させ、テストや変更が容易になります。

### 依存性注入

`GetIt`を使用して依存性注入を実装しています。これにより、コンポーネント間の結合度を低く保ち、テストの容易さを確保しています。

### エラーハンドリング

エラーハンドリングは`Either`型（dartz パッケージ）を使用して実装されています。これにより、エラーケースと成功ケースを型安全に処理できます。

## 主な機能

- カードの追加、編集、削除
- カード一覧の表示
- デッキの作成と管理
- カードのデッキへの割り当て

## 使用技術

- Flutter
- Drift (SQLite ORM)
- flutter_bloc (状態管理)
- get_it (依存性注入)
- dartz (関数型プログラミングユーティリティ)
- equatable (値の比較)

## 将来の展望

- より高度な検索機能の追加
- ユーザー間のカード共有機能
- ショップ連携機能
   - カードの売買機能
   - 対応ショップで買うとデータ自動追加
- モバイルデバイス向けの最適化
