# ユビキタス言語

## 目的
CardPro が扱うカードコレクション／デッキ運用領域で、開発者と関係者が同じ言葉で会話できるようにするための共通語彙を定義する。

## 領域スコープ
- コレクション管理: カード定義とカードインスタンスを同期させ、所持状況を把握する領域
- コンテナ管理: コンテナの CRUD と属性（種別・説明・アクティブ状態）を扱う領域
- デッキ運用: type=deck のコンテナを中心に、カード割り当てと使用チェックを行う領域
- 補完支援: 未所属インスタンスや他コンテナからの候補抽出でデッキ調整を支援する領域

## コア名詞
- カード (Card/MtgCard): カード名・セット・レアリティ等を持つマスターデータで、カード効果と 1 対多に紐づく
- カード効果 (CardEffect): Oracle テキスト等の共通効果を正規化したデータで、複数カードが参照する
- カードインスタンス (CardInstance): プレイヤーが所有する具体的な 1 枚。メモや更新日時など個別状態を保持する
- コンテナ (Container): カードインスタンスを格納する論理的な入れ物。種別でデッキや保管庫を表現する
- デッキ (Deck): containerType='deck' のコンテナ。アクティブデッキと main/side 構成を前提に扱う
- コンテナカード配置 (ContainerCardLocation): カードインスタンスがどのコンテナのどのロケーションにあるかを示す結合

## 補助名詞・属性
- コンテナ種別 (containerType): デッキ・引き出し・バインダー等の役割を示す必須属性で、将来のフォーマット拡張にも利用する
- ロケーション (location): `main`/`side`/`storage` など、デッキ内での配置区分を表す列挙的文字列
- アクティブデッキ (isActive): 現在使用中のデッキを一意に指すフラグで、運用シーンの既定対象を決める
- 未所属インスタンス: どのコンテナにも割り当てられていないカードインスタンスの集合。補完候補の基本ソースになる
- 補完候補: 使用チェックで抽出される「どのカードをどこからどこへ移すか」の候補リスト。差し替え指示の単位

## 共通動詞
- 登録する (Register): カードやコンテナを新規作成する操作。Card/Container の追加ユースケースに対応する
- 編成する (Edit): 既存エンティティの名称・説明・種別を更新する操作。DeckDetail/ContainerDetail の保存と整合する
- 割り当てる (Assign): カードインスタンスを特定コンテナのロケーションへ配置する操作。`addCardToDeck` に相当
- 解除する (Unassign): コンテナからカードインスタンスを外す操作。`removeCardFromDeck` の意図を表す
- 使用チェックする (Run Usage Check): デッキ構成をルール雁囲下で検証し、不足や余剰を検出して補完候補を提示する動詞