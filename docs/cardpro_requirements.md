# 📄 要件定義書：カード＆デッキ管理アプリ

---

## 1. 概要

本アプリは、ポケモンカード（または類似のトレーディングカード）の情報管理およびデッキ構築・管理を目的としたモバイルアプリである。  
ユーザーはカードの詳細を記録し、カードをデッキに登録・分類することができる。

---

## 2. 目的

- カードコレクションの電子管理
- デッキ構築支援
- カード効果の統一管理（重複排除）
- UI からのカード編集・削除機能の提供

---

## 3. 利用対象者

- トレーディングカードユーザー
- カードゲームプレイヤー（ポケカ等）
- 自作デッキを管理したいプレイヤー

---

## 4. 機能一覧

### 4.1 カード管理

- [x] カードの追加・編集・削除
- [x] カード効果（`CardEffect`）の共通化
- [x] カードに対する自由記述メモ（インスタンスごと）
- [x] カード一覧画面

### 4.2 デッキ管理

- [x] デッキ（Container）の作成・編集・削除
- [x] デッキにカードを追加（場所：main / side）
- [x] デッキごとのカード一覧表示
- [ ] デッキの画像・サムネイル登録（将来対応）
- デッキ使用ボタンによる構成チェック＆補完処理  
  → ユーザーが「使用」ボタンを押すと、デッキ内のカード数・構成を検証し、不足がある場合は補完候補（未所属 or 他デッキのカード）を提示する。

### 4.3 共通機能

- [x] SQLiteベースのローカル保存（Drift）
- [x] DI（GetIt）によるモジュール管理
- [x] Clean Architecture + BLoC構成

---

## 5. データ構造（概要）

| テーブル名                    | 説明                               |
|------------------------------|------------------------------------|
| `pokemon_cards`              | カードの基本情報                   |
| `card_instances`             | カードのインスタンス情報（メモ付き）|
| `card_effects`               | 共通の効果情報                     |
| `containers`                 | デッキの基本情報                   |
| `container_card_locations`   | デッキ内のカード配置情報           |

---

## 6. 画面一覧

- ホーム画面（ナビゲーション）
- カード一覧ページ
- カード追加フォーム（ダイアログ）
- カード詳細ページ（ダイアログ）
- デッキ一覧ページ
- デッキ詳細ページ（カード一覧）
- デッキ追加フォーム　（ダイアログ）

---

## 7. 非機能要件

| 要件項目       | 内容                           |
|----------------|--------------------------------|
| OS対応         | Android（Flutter）             |
| DB             | SQLite（Drift）                |
| UIフレームワーク | Flutter（Material UI）          |
| 言語           | 日本語                         |
| テスト         | Unitテスト、Widgetテスト対応   |

---

## 8. 今後の拡張予定

- Firebase連携によるクラウド同期
- 画像アップロード機能（カード or デッキ）
- デッキのシェア機能
- カード検索・絞り込み機能

---

